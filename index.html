<!DOCTYPE html>
<html>
  <head>
    <title>Tag Editor V</title>
    <link rel="stylesheet" href="css/app.css">
    <link rel="stylesheet" href="css/styles.css">
  </head>
  <body>
    <div class="app">
      <div class="nav" id="nav">
        <strong style="display: block; margin-bottom: .5em;">Cloak</strong>
        <button class="te-form-control" style="margin-bottom: .5em; width: 100%;" onclick="Cloak.invoke(contexts, true);">Open file</button>
        <button class="te-form-control" style="width: 100%;" onclick="Cloak.invoke(contexts, false);">New file</button>
        <hr>
        <span>Press <kbd>Tab</kbd> to toggle the sidebar</span><br>
        <span>Press <kbd>Ctrl+S</kbd> to save current file</span>
      </div>

      <div class="main">
        <div class="tabs" id="tabs"></div>

        <div class="body" id="body"></div>
      </div>
    </div>

    <script src="js/Widgets.js"></script>
    <script src="js/ObjectWidgets.js"></script>
    <script src="js/PrimitiveWidgets.js"></script>
    <script src="js/app.js"></script>
    <script src="plugins/cloak.js"></script>
    <script>
      const contexts = new Contexts();

      window.addEventListener("keydown", ev => {
        if (ev.code == "KeyS" && ev.ctrlKey) {
          ev.preventDefault();
          ev.stopImmediatePropagation();
          contexts.save();
        } else if (ev.code == "Tab" && !document.querySelector(":focus:not(button)")) {
          ev.preventDefault();
          ev.stopImmediatePropagation();
          document.getElementById("nav").hidden = !document.getElementById("nav").hidden;
        }
      });

      /*
      let container = document.createElement("div");

      container.append(root.element);
      document.body.append(container);

      container.style.width = container.offsetWidth + "px";
      container.style.height = container.offsetHeight + "px";
      */
    </script>
  </body>
</html>